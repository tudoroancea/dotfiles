import type {
	ExtensionAPI,
	ExtensionContext,
} from "@mariozechner/pi-coding-agent";

const WORDS = [
	"Abracadabra-ing",
	"Accomplishing",
	"Actioning",
	"Actualizing",
	"Alchemizing",
	"Baking",
	"Bamboozling",
	"Befuddling",
	"Bippity-bopping",
	"Blathering",
	"Blobulating",
	"Bonkering",
	"Boondoggling",
	"Booping",
	"Brewing",
	"Bubbling",
	"Bumbling",
	"Burbling",
	"Calculating",
	"Calibrating",
	"Canoodling",
	"Careening",
	"Catawampusing",
	"Cerebrating",
	"Channelling",
	"Churning",
	"Clauding",
	"Coalescing",
	"Cogitating",
	"Combobulating",
	"Computing",
	"Concocting",
	"Confabulating",
	"Confustricating",
	"Conjuring",
	"Considering",
	"Contemplating",
	"Cooking",
	"Coruscating",
	"Crafting",
	"Creating",
	"Crunching",
	"Dallying",
	"Deciphering",
	"Deliberating",
	"Determining",
	"Diddly-doing",
	"Discerning",
	"Discombobulating",
	"Dithering",
	"Divining",
	"Doing",
	"Doodling",
	"Effecting",
	"Elucidating",
	"Enchanting",
	"Endeavoring",
	"Envisioning",
	"Extrapolating",
	"Faffing",
	"Fandangling",
	"Fenagling",
	"Fermenting",
	"Fidgeting",
	"Finagling",
	"Finagling",
	"Fizzing",
	"Flibbertigibbeting",
	"Fluffing",
	"Forging",
	"Forming",
	"Frolicking",
	"Galumphing",
	"Generating",
	"Germinating",
	"Gesticulating",
	"Grokking",
	"Grooving",
	"Gurgling",
	"Gyrating",
	"Hatching",
	"Herding",
	"Higgledy-ing",
	"Hodgepodging",
	"Honking",
	"Hoodwinking",
	"Hootenannying",
	"Hullaballooing",
	"Hustling",
	"Hypothesizing",
	"Ideating",
	"Imagining",
	"Incubating",
	"Inferring",
	"Jiggering",
	"Jiving",
	"Kerfuffling",
	"Kibbitzing",
	"Lollygagging",
	"Machinating",
	"Manifesting",
	"Marinating",
	"Marinating",
	"Meandering",
	"Meandering",
	"Mischief-making",
	"Mishmashing",
	"Monkeywrenching",
	"Moseying",
	"Mulling",
	"Musing",
	"Mustering",
	"Nerfherding",
	"Noodling",
	"Oscillating",
	"Palavering",
	"Peckering",
	"Perambulating",
	"Percolating",
	"Perusing",
	"Phantasmagoring",
	"Philosophising",
	"Plonking",
	"Pondering",
	"Pontificating",
	"Pootling",
	"Processing",
	"Prognosticating",
	"Puttering",
	"Puzzling",
	"Razzle-dazzling",
	"Recalibrating",
	"Reticulating",
	"Ruminating",
	"Rummaging",
	"Scheming",
	"Schlepping",
	"Scooching",
	"Scribbling",
	"Shazaming",
	"Shimmying",
	"Shucking",
	"Simmering",
	"Skedaddling",
	"Skibidi-ing",
	"Sleuthing",
	"Smooshing",
	"Snarfling",
	"Snazzifying",
	"Snooping",
	"Spelunking",
	"Spinning",
	"Spitballing",
	"Splooging",
	"Stewing",
	"Sussing",
	"Synthesizing",
	"Thingamabobbing",
	"Thinking",
	"Thunking",
	"Tinkering",
	"Toddering",
	"Tomfoolering",
	"Transmogrifying",
	"Transmuting",
	"Twiddling",
	"Unfuddling",
	"Unfurling",
	"Unravelling",
	"Vibing",
	"Wandering",
	"Whatchamacalling",
	"Whirring",
	"Wibbling",
	"Wiggling",
	"Winging",
	"Wizarding",
	"Working",
	"Wrangling",
	"Zigzagging",
];

const pickWord = () => {
	return WORDS[Math.floor(Math.random() * WORDS.length)];
};

export default function workingWordExtension(pi: ExtensionAPI) {
	const clearWorkingMessage = (ctx: ExtensionContext) => {
		if (!ctx.hasUI) return;
		ctx.ui.setWorkingMessage();
	};

	pi.on("session_start", async (_event, ctx) => {
		clearWorkingMessage(ctx);
	});

	pi.on("session_switch", async (_event, ctx) => {
		clearWorkingMessage(ctx);
	});

	pi.on("turn_start", async (_event, ctx) => {
		if (!ctx.hasUI) return;
		ctx.ui.setWorkingMessage(`${pickWord()}...`);
	});

	pi.on("agent_end", async (_event, ctx) => {
		clearWorkingMessage(ctx);
	});
}
